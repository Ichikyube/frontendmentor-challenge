<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <!-- displays site properly based on user's device -->

    <link
      rel="icon"
      type="image/png"
      sizes="32x32"
      href="./images/favicon-32x32.png"
    />
    <link rel="stylesheet" href="style.css" />
    <title>Frontend Mentor | Calculator app</title>
    <!-- Feel free to remove these styles or customise in your own stylesheet 👍 -->
    <style>
      .attribution {
        font-size: 11px;
        text-align: center;
      }

      .attribution a {
        color: hsl(228, 45%, 44%);
      }
    </style>
  </head>
  <body id="body" class="theme-dark">
    <div id="page">
      <div class="container">
        <div class="topbar">
          <p>calc</p>
          <div class="toggle">
            <div class="lvl">1 2 3</div>
            <div class="row">
              Theme
              <div class="lvlbar">
                <input
                  type="radio"
                  name="lvlbar"
                  value="theme-dark"
                  class="circle"
                  id="radio-1"
                  onchange="switchTheme()"
                  checked
                />
                <input
                  type="radio"
                  name="lvlbar"
                  value="theme-light"
                  class="circle"
                  id="radio-2"
                  onchange="switchTheme()"
                />
                <input
                  type="radio"
                  name="lvlbar"
                  value="theme-purple"
                  class="circle"
                  id="radio-3"
                  onchange="switchTheme()"
                />
              </div>
            </div>
          </div>
        </div>
        <div id="screen"><div id="result"></div></div>
        <div class="keypad">
          <div class="rowkey">
            <button class="colkey" type="button" onclick="insert(7)">7</button>
            <button class="colkey" type="button" onclick="insert(8)">8</button>
            <button class="colkey" type="button" onclick="insert(9)">9</button>
            <button class="colkey" type="button" onclick="back()">del</button>
          </div>
          <div class="rowkey">
            <button class="colkey" type="button" onclick="insert(4)">4</button>
            <button class="colkey" type="button" onclick="insert(5)">5</button>
            <button class="colkey" type="button" onclick="insert(6)">6</button>
            <button class="colkey" type="button" onclick="add()">+</button>
          </div>
          <div class="rowkey">
            <button class="colkey" type="button" onclick="insert(1)">1</button>
            <button class="colkey" type="button" onclick="insert(2)">2</button>
            <button class="colkey" type="button" onclick="insert(3)">3</button>
            <button class="colkey" type="button" onclick="substract()">
              -
            </button>
          </div>
          <div class="rowkey">
            <button class="colkey" type="button" onclick="dot()">.</button>
            <button class="colkey" type="button" onclick="insert(0)">0</button>
            <button class="colkey" type="button" onclick="divideBy()">/</button>
            <button class="colkey" type="button" onclick="multiplyBy()">
              x
            </button>
          </div>
          <div class="rowkey">
            <button class="reset" type="button" onclick="reset()">RESET</button>
            <button class="equal" type="button" onclick="calculate()">=</button>
          </div>
        </div>
      </div>
      <br />
      <div class="attribution">
        Challenge by
        <a href="https://www.frontendmentor.io?ref=challenge" target="_blank"
          >Frontend Mentor</a
        >. Coded by <a href="#">Valentino Alam</a>.
      </div>
    </div>
    <script>
      
      function switchTheme() {
        let bo = document.getElementById("body").classList;
        if (document.getElementById("radio-1").checked == true) {
          return bo.replace(bo.value, "theme-dark");
        }
        if (document.getElementById("radio-2").checked == true) {
          return bo.replace(bo.value,"theme-light");
        }
        if (document.getElementById("radio-3").checked == true) {
          return bo.replace(bo.value,"theme-purple");
        }
      }
      let sqrCheck = 0;
      function insert(x) {
        return (document.getElementById("result").innerHTML += x);
      }
      function reset() {
        return (document.getElementById("result").innerHTML = "0");
      }
      function calculate() {
        return (document.getElementById("result").innerHTML = eval(
          String(document.getElementById("result").innerHTML)
        ));
      }
      function add() {
        return (document.getElementById("result").innerHTML += "+");
      }
      function substract() {
        return (document.getElementById("result").innerHTML += "-");
      }
      function multiplyBy() {
        return (document.getElementById("result").innerHTML += "*");
      }
      function divideBy() {
        return (document.getElementById("result").innerHTML += "/");
      }
      function back() {
        let check = document.form.txt.value;
        if (check[check.length - 1] === "(") {
          if (sqrCheck > 0) {
            sqrCheck--;
          }
        }
        if (check[check.length - 1] === ")") {
          sqrCheck++;
        }
        if (check.length === 1) {
          document.form.txt.value = "0";
        } else {
          let temp = "";
          for (let i = 0; i < check.length - 1; i++) {
            temp += check[i];
          }
          document.form.txt.value = temp;
        }
      }
      function dot() {
        let check = document.form.txt.value;
        let flag = false;
        for (let i = check.length - 1; i >= 0; i--) {
          if (isNaN(Number(check[i]))) {
            if (i === check.length - 1 || check[i] === ".") {
              flag = false;
              break;
            } else {
              flag = true;
              break;
            }
          }
          flag = true;
        }
        if (flag) {
          document.form.txt.value += ".";
        }
      }
      function operator(opr) {
        let check = document.form.txt.value;
        if (
          Number(check[check.length - 1]) ||
          check[check.length - 1] === ")"
        ) {
          document.form.txt.value += opr;
        }
      }
    </script>
  </body>
</html>
